
# Art Home Soni - Веб-приложение

## Подробная инструкция по запуску проекта

### Предварительные требования
1. Установить [Node.js](https://nodejs.org/) (рекомендуется версия 14.x или новее)
2. Установить [MongoDB](https://www.mongodb.com/try/download/community) или использовать [MongoDB Atlas](https://www.mongodb.com/cloud/atlas) (облачный сервис)
3. Установить [Git](https://git-scm.com/downloads) (если вы клонировали репозиторий)

### Шаг 1: Настройка и запуск сервера (бэкенд)
1. Откройте терминал в корне проекта и перейдите в папку сервера:
```
cd server
```

2. Установите зависимости для сервера:
```
npm install
```

3. Настройте переменные окружения:
   - Убедитесь, что в папке server есть файл `.env`
   - Он должен содержать следующие настройки:
```
PORT=5000
MONGODB_URI=mongodb://localhost:27017/art_home_soni
JWT_SECRET=your_jwt_secret_key_here
```

4. Запустите MongoDB:
   - Если вы используете локальную установку MongoDB:
     ```
     # В отдельном терминале запустите:
     mongod
     ```
   - Если вы используете MongoDB Atlas, убедитесь, что ваш MONGODB_URI в .env файле правильный

5. Запустите сервер:
```
npm start
```

6. Проверьте работу сервера:
   - Откройте браузер и перейдите по адресу: `http://localhost:5000/api`
   - Вы должны увидеть сообщение: `{ "message": "Art Home Soni API работает" }`
   - Если вы видите это сообщение, значит сервер запущен успешно

### Шаг 2: Настройка и запуск клиента (фронтенд)
1. Откройте новый терминал в корне проекта (не закрывая терминал с запущенным сервером)

2. Установите зависимости для клиента:
```
npm install
```

3. Создайте файл `.env` в корне проекта (если его еще нет):
```
echo "VITE_API_URL=http://localhost:5000/api" > .env
```

4. Запустите клиентскую часть:
```
npm run dev
```

5. Откройте приложение:
   - Перейдите по адресу, указанному в терминале (обычно http://localhost:5173)

### Шаг 3: Регистрация и использование приложения
1. На главной странице нажмите "Войти" или "Регистрация"
2. Зарегистрируйте нового пользователя
3. Для входа в админ-панель, вам нужно создать пользователя с правами администратора:
   - Для этого можно напрямую изменить роль пользователя в базе данных MongoDB
   - Используйте MongoDB Compass или другой инструмент для работы с MongoDB
   - Найдите коллекцию users и измените свойство isAdmin на true для нужного пользователя

### Решение проблем
Если вы видите ошибку "Failed to fetch" при регистрации или входе:

1. Убедитесь, что сервер запущен (http://localhost:5000/api возвращает JSON-ответ)
2. Проверьте, что MongoDB запущен и доступен
3. Убедитесь, что в файле .env в корне проекта указан правильный URL API
4. Проверьте консоль браузера (F12) на наличие ошибок
5. Проверьте консоль сервера на наличие ошибок

Если у вас возникают проблемы с CORS (Cross-Origin Resource Sharing):
1. Убедитесь, что в файле server/index.js включен middleware cors
2. Проверьте, что фронтенд и бэкенд используют правильные порты

### Полезные команды
- Остановить сервер: Ctrl+C в терминале с запущенным сервером
- Очистить кэш npm: `npm cache clean --force`
- Проверить работу API: `curl http://localhost:5000/api`
